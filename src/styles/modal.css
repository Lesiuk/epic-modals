.modal-dialog {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: var(--modal-bg);
  border: 1px solid var(--modal-border);
  border-radius: var(--modal-border-radius);
  overflow: visible;
  width: calc(100% - 2rem);
  max-width: 480px;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
  box-shadow: var(--modal-shadow-lg);
  outline: none;
  opacity: 0;
  transition: height 0.15s ease-out, background-color 0.2s ease, border-color 0.2s ease;
}
.modal-dialog.modal-positioned {
  transform: none;
  opacity: 1;
}

.modal-dialog.modal-positioned.modal-restoring,
.modal-dialog.modal-positioned.modal-opening {
  opacity: unset;
}
.modal-dialog.modal-centered {
  opacity: 1;
}
.modal-dialog.modal-awaiting-restore {
  opacity: 0 !important;
  pointer-events: none;
}
.modal-dialog.modal-awaiting-child-open:not(.modal-opening):not(.modal-restoring) {
  opacity: 0 !important;
  pointer-events: none;
}
.modal-dialog.modal-dragging {
  opacity: 0.9;
  user-select: none;
  transition: none;
}
.modal-dialog.modal-resizing {
  user-select: none;
  transition: none;
}
.modal-dialog.modal-animating-to-center,
.modal-dialog.modal-animating-position {

}
.modal-dialog.modal-solid {
  background: var(--modal-bg);
}
.modal-dialog.modal-transparent {
  background: var(--modal-bg-transparent);
  opacity: 0.4;
}

.modal-dialog.modal-minimizing {
  pointer-events: none;
  animation: modal-genie-minimize var(--modal-animation-duration-minimize) var(--modal-animation-easing-minimize) forwards;
  transform-origin: var(--genie-origin-x, 50%) var(--genie-origin-y, 100%);
  will-change: transform, opacity;
  backface-visibility: hidden;
}
.modal-dialog.modal-restoring {
  pointer-events: none;
  animation: modal-genie-restore var(--modal-animation-duration-restore) ease-out both;
  transform-origin: var(--genie-origin-x, 50%) var(--genie-origin-y, 100%);
  will-change: transform, opacity;
  backface-visibility: hidden;
}
.modal-dialog.modal-opening {
  pointer-events: none;
  animation: modal-genie-restore var(--modal-animation-duration-open) ease-out both;
  transform-origin: var(--genie-origin-x, 50%) var(--genie-origin-y, 50%);
  will-change: transform, opacity;
  backface-visibility: hidden;
}
.modal-dialog.modal-closing {
  pointer-events: none;
  animation: modal-close var(--modal-animation-duration-close) var(--modal-animation-easing-close) forwards;
  will-change: transform, opacity;
  backface-visibility: hidden;
}
.modal-dialog.modal-closing:not(.modal-positioned) {
  animation-name: modal-close-centered;
}
.modal-dialog.modal-positioned.modal-minimizing,
.modal-dialog.modal-positioned.modal-closing {
  transform: unset;
  opacity: unset;
}
.modal-dialog.modal-positioned.modal-opening,
.modal-dialog.modal-positioned.modal-restoring {
  transform: unset;

}
.modal-dialog.modal-visible-by-animation:not(.modal-restoring):not(.modal-opening) {
  opacity: 1;
}

.modal-dialog.modal-attention {
  animation:
    modal-shake-positioned 0.5s cubic-bezier(0.36, 0.07, 0.19, 0.97) both,
    modal-attention-glow 0.6s ease-out both;
}
.modal-dialog.modal-attention:not(.modal-positioned) {
  animation:
    modal-shake-centered 0.5s cubic-bezier(0.36, 0.07, 0.19, 0.97) both,
    modal-attention-glow 0.6s ease-out both;
}

.modal-dialog.modal-attention.modal-glow {
  --modal-attention-color: var(--modal-glow-color);
}

.modal-dialog.modal-glow {
  border-color: rgb(var(--modal-glow-color));
  --glow-intensity-min: 0.4;
  --glow-intensity-max: 0.7;
}
.modal-dialog.modal-glow::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  box-shadow: 0 0 20px rgb(var(--modal-glow-color)), 0 0 40px rgb(var(--modal-glow-color)), 0 0 60px rgb(var(--modal-glow-color));
  opacity: var(--glow-intensity-min);
  animation: modal-glow-pulse 2s ease-in-out infinite;
  pointer-events: none;
  will-change: opacity;
}
.modal-dialog.modal-glow.modal-glow-minimum {
  border-color: rgba(var(--modal-glow-color), 0.4);
  --glow-intensity-min: 0;
  --glow-intensity-max: 0;
}
.modal-dialog.modal-glow.modal-glow-minimum::before {
  display: none;
}
.modal-dialog.modal-glow.modal-glow-low {
  --glow-intensity-min: 0.15;
  --glow-intensity-max: 0.3;
}
.modal-dialog.modal-glow.modal-glow-high {
  --glow-intensity-min: 0.6;
  --glow-intensity-max: 0.9;
}

.modal-dialog.modal-glow.modal-minimizing::before,
.modal-dialog.modal-glow.modal-restoring::before,
.modal-dialog.modal-glow.modal-opening::before,
.modal-dialog.modal-glow.modal-closing::before,
.modal-dialog.modal-glow.modal-glow-stabilizing:not(.modal-restoring):not(.modal-opening)::before {
  animation: none;
  opacity: var(--glow-intensity-min, 0.4);
}

.modal-header {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: var(--modal-header-padding);
  border-bottom: 1px solid var(--modal-header-border);
  flex-shrink: 0;
  outline: none;
  overflow: visible;
  position: relative;
}
.modal-header.modal-header-draggable {
  cursor: grab;
  user-select: none;
  touch-action: none;
}
.modal-header.modal-header-draggable:active {
  cursor: grabbing;
}

.modal-header-traffic-lights {
  display: flex;
  gap: var(--modal-btn-gap);
  flex-shrink: 0;
  z-index: 100;
  position: relative;
}
.modal-header-traffic-lights .modal-header-light {
  width: var(--modal-btn-size);
  height: var(--modal-btn-size);
  border-radius: 50%;
  border: none;
  cursor: pointer;
  transition: filter 0.15s ease, transform 0.1s ease;
  position: relative;
  padding: 0;
  flex-shrink: 0;
  outline: none;
}
.modal-header-traffic-lights .modal-header-light::before {
  content: '';
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.15s ease;
}
.modal-header-traffic-lights .modal-header-light:hover {
  transform: scale(1.1);
}
.modal-header-traffic-lights .modal-header-light:hover::before {
  opacity: 1;
}
.modal-header-traffic-lights .modal-header-light:focus-visible {
  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.5), 0 0 0 4px rgba(0, 0, 0, 0.2);
}
.modal-header-light-close {
  background: var(--modal-btn-close);
  box-shadow: inset 0 0 0 0.5px rgba(0, 0, 0, 0.12);
}
.modal-header-light-close:hover { filter: brightness(0.92); }
.modal-header-traffic-lights .modal-header-light.modal-header-light-close::before {
  content: '×';
  color: rgba(74, 0, 2, 0.8);
  font-size: 11px;
  font-weight: 600;
  line-height: 13px;
}
.modal-header-light-minimize {
  background: var(--modal-btn-minimize);
  box-shadow: inset 0 0 0 0.5px rgba(0, 0, 0, 0.12);
}
.modal-header-light-minimize:hover { filter: brightness(0.92); }
.modal-header-traffic-lights .modal-header-light.modal-header-light-minimize::before {
  content: '−';
  color: rgba(153, 87, 0, 0.8);
  font-size: 13px;
  font-weight: 600;
  line-height: 12px;
}
.modal-header-light-style {
  background: var(--modal-btn-style);
  box-shadow: inset 0 0 0 0.5px rgba(0, 0, 0, 0.12);
}
.modal-header-light-style:hover { filter: brightness(0.92); }
.modal-header-traffic-lights .modal-header-light.modal-header-light-style::before {
  content: '◇';
  color: rgba(0, 101, 0, 0.8);
  font-size: 7px;
  line-height: 13px;
}

.modal-header-light.modal-header-light-disabled {
  background: #ccc;
  opacity: 0.5;
  cursor: not-allowed;
}
.modal-header-light.modal-header-light-disabled:hover {
  filter: none;
}
.modal-header-traffic-lights .modal-header-light.modal-header-light-disabled::before {
  opacity: 0.4;
}

.modal-header-mac-center {
  position: absolute;
  left: 0;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  pointer-events: none;
}
.modal-header-mac-center .modal-header-title-group {
  flex: unset;
  pointer-events: auto;
}
.modal-header-mac-center .modal-header-icon {
  pointer-events: auto;
}
.modal-header-mac-spacer {
  display: none;
}

.modal-header-title-group {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex: 1;
  min-width: 0;
}
.modal-header-title {
  margin: 0;
  font-size: var(--modal-title-size);
  color: var(--modal-title-color);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  min-width: 0;
}

.modal-header-icon {
  font-size: var(--modal-icon-size);
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  width: var(--modal-icon-size);
  height: var(--modal-icon-size);
}
.modal-header-icon-badge {
  position: absolute;
  bottom: -6px;
  right: -8px;
  font-size: var(--modal-icon-badge-size);
  line-height: 1;
  background: var(--modal-bg);
  border-radius: 50%;
  padding: 2px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.modal-header-btn-windows {
  background: none;
  border: none;
  font-size: 1.25rem;
  color: var(--modal-btn-windows-color);
  cursor: pointer;
  padding: 0.25rem;
  line-height: 1;
  border-radius: 4px;
  transition: background-color 0.15s ease, color 0.15s ease;
}
.modal-header-btn-windows:hover {
  color: var(--modal-btn-windows-hover-color);
  background: var(--modal-btn-windows-hover-bg);
}
.modal-header-btn-windows-style { font-size: 1.15rem; }
.modal-header-btn-windows-close { font-size: 1.5rem; padding: 0; }

.modal-header-btn-windows.modal-header-btn-windows-disabled {
  opacity: 0.35;
  cursor: not-allowed;
}
.modal-header-btn-windows.modal-header-btn-windows-disabled:hover {
  background: none;
  color: var(--modal-btn-windows-color);
}

.modal-body {
  position: relative;
  flex: 1 1 auto;
  min-height: 0;
  overflow-y: auto;
  padding: var(--modal-content-padding);
  display: flex;
  flex-direction: column;
  color: var(--modal-content-color);
}
.modal-body::-webkit-scrollbar {
  width: 6px;
}
.modal-body::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.05);
}
.modal-body::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 3px;
}

.modal-footer {
  flex-shrink: 0;
  padding: var(--modal-footer-padding);
  border-top: 1px solid var(--modal-footer-border);
}
.modal-footer-empty:empty {
  display: none;
}

.modal-resize-handle {
  position: absolute;
  z-index: 10;
  touch-action: none;
}
.modal-resize-n, .modal-resize-s {
  left: 8px;
  right: 8px;
  height: var(--modal-resize-handle-size);
  cursor: ns-resize;
}
.modal-resize-n { top: calc(var(--modal-resize-handle-size) / -2); }
.modal-resize-s { bottom: calc(var(--modal-resize-handle-size) / -2); }
.modal-resize-e, .modal-resize-w {
  top: 8px;
  bottom: 8px;
  width: var(--modal-resize-handle-size);
  cursor: ew-resize;
}
.modal-resize-e { right: calc(var(--modal-resize-handle-size) / -2); }
.modal-resize-w { left: calc(var(--modal-resize-handle-size) / -2); }
.modal-resize-ne, .modal-resize-nw, .modal-resize-se, .modal-resize-sw {
  width: var(--modal-resize-corner-size);
  height: var(--modal-resize-corner-size);
}
.modal-resize-ne { top: calc(var(--modal-resize-handle-size) / -2); right: calc(var(--modal-resize-handle-size) / -2); cursor: nesw-resize; }
.modal-resize-nw { top: calc(var(--modal-resize-handle-size) / -2); left: calc(var(--modal-resize-handle-size) / -2); cursor: nwse-resize; }
.modal-resize-se { bottom: calc(var(--modal-resize-handle-size) / -2); right: calc(var(--modal-resize-handle-size) / -2); cursor: nwse-resize; }
.modal-resize-sw { bottom: calc(var(--modal-resize-handle-size) / -2); left: calc(var(--modal-resize-handle-size) / -2); cursor: nesw-resize; }

.modal-child-overlay {
  position: absolute;
  inset: 0;
  background: var(--modal-child-overlay-bg);
  backdrop-filter: blur(var(--modal-child-overlay-blur));
  border-radius: inherit;
  z-index: 100;
  cursor: not-allowed;
  pointer-events: all;
  animation: modal-overlay-fade-in 0.2s ease-out forwards;
}
.modal-child-overlay.modal-overlay-closing {
  animation: modal-overlay-fade-out 0.2s ease-in forwards;
  pointer-events: none;
}

.modal-dialog.modal-has-child .modal-header-actions {
  pointer-events: none;
  opacity: 0.5;
}
.modal-dialog.modal-has-child .modal-header-draggable {
  cursor: not-allowed;
}
.modal-dialog.modal-is-child.modal-positioned:not(.modal-closing):not(.modal-minimizing):not(.modal-restoring):not(.modal-visible-by-animation):not(.modal-was-restored):not(.modal-awaiting-restore):not(.modal-awaiting-child-open) {
  animation: modal-child-appear 0.25s ease-out both;
}
.modal-dialog.modal-is-child.modal-closing {
  animation: modal-child-disappear 0.2s ease-in forwards;
}
